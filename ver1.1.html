<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãŠé¡Œãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼†é‹è©¦ã—</title>
<style>
  html, body { margin:0; padding:0; height:100%; position:relative; overflow:hidden; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #ffefba, #a0e0ff);
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    padding: 15px;
  }

  body::before {
    content: "";
    position: absolute;
    width: 200%;
    height: 200%;
    top: -50%;
    left: -50%;
    background: radial-gradient(circle, rgba(255,255,255,0.2) 10%, transparent 10%);
    background-size: 50px 50px;
    pointer-events: none;
    animation: floatPattern 60s linear infinite;
    z-index:0;
  }

  @keyframes floatPattern {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  h1 { text-align: center; color: crimson; margin:5px 0 10px 0; font-size:24px; position:relative; z-index:1; }
  #rules {
    background: rgba(249, 249, 249, 0.8);
    border-left:6px solid crimson;
    padding:10px;
    margin-bottom:10px;
    font-size:14px;
    line-height:1.4;
    width:90%;
    position:relative;
    z-index:1;
  }
  #prompt { font-size:18px; font-weight:bold; color:#222; margin:10px 0; text-align:center; position:relative; z-index:1; }
 textarea {
    width: 90%;
    height: 10vh; 
    font-size: 16px;
    padding: 8px;
    border: 2px solid #ccc;
    border-radius: 6px;
    resize: none;
    margin-bottom: 8px;
    position: relative;
    z-index: 1;
}

}

  }
  #score, #finalMessage { margin:8px 0; font-weight:bold; font-size:16px; text-align:center; position:relative; z-index:1; }
  #roulette {
    font-size:28px;
    text-align:center;
    cursor:pointer;
    color: crimson;
    margin-top:8px;
    transition: transform 0.2s;
    position:relative;
    z-index:1;
  }
  button {
    padding:8px 20px;
    font-size:14px;
    background-color: crimson;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
    margin-bottom:5px;
    position:relative;
    z-index:1;
  }
  button:hover { background-color:#b30000; }

  .particle {
    position:absolute;
    width:6px;
    height:6px;
    background: crimson;
    border-radius:50%;
    pointer-events:none;
    animation: float 4s linear infinite;
    z-index:2;
  }
  @keyframes float {
    0% { transform: translateY(0) translateX(0); opacity:1; }
    100% { transform: translateY(-600px) translateX(50px); opacity:0; }
  }

  .confetti { border-radius:2px; z-index:0; }
</style>
</head>
<body>

<h1>ãŠé¡Œãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼†é‹è©¦ã—</h1>

<div id="rules">
  <strong>ãƒ«ãƒ¼ãƒ«èª¬æ˜:</strong><br>
  1. ä»Šæ—¥ã®ãŠé¡Œã«æ²¿ã£ãŸæ–‡ç« ã‚’æ›¸ã“ã†ã€‚<br>
  2. æ–‡ç« ã¯ <strong>10æ–‡å­—ä»¥ä¸Šãƒ»300æ–‡å­—ä»¥å†…</strong> ã§æ›¸ã„ã¦ãã ã•ã„ã€‚<br>
  3. ãŠé¡Œã«ã¯ã¡ã‚‡ã£ã¨å¤‰ãªåˆ¶é™ã‚„æ¡ä»¶ãŒã‚ã‚Šã¾ã™ï¼ˆä¾‹ï¼šæ“¬äººåŒ–ã€æ„Ÿæƒ…è¡¨ç¾å¿…é ˆï¼‰ã€‚<br>
  4. æ–‡ç« ã‚’æ›¸ã„ãŸã‚‰ã€Œæå‡ºã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€‚<br>
  5. ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒå›ã‚Šã€ã‚¯ãƒªãƒƒã‚¯ã§åœæ­¢ã€‚çµæœã«å¿œã˜ã¦ã‚¹ã‚³ã‚¢ãŒåŠ ç®—ã•ã‚Œã¾ã™ï¼<br>
  6. ã€ŒæˆåŠŸã€ã‚„ã€Œå¤§æˆåŠŸã€ã‚’ç‹™ã£ã¦é«˜å¾—ç‚¹ã‚’ç›®æŒ‡ãã†ï¼<br>
  7. SNSã§ã‚¹ã‚¯ã‚·ãƒ§ã—ã¦ã‚·ã‚§ã‚¢ã™ã‚‹ã¨ç››ã‚Šä¸ŠãŒã‚‹ã‚ˆï¼ï¼ï¼
</div>

<div id="prompt">ãŠé¡Œã‚’ç”Ÿæˆä¸­â€¦</div>
<textarea id="input" placeholder="ã“ã“ã«æ–‡ç« ã‚’æ›¸ã“ã†"></textarea>
<button id="submit">æå‡º</button>
<button id="end">çµ‚äº†</button>
<div id="score">åˆè¨ˆã‚¹ã‚³ã‚¢: 0</div>
<div id="roulette">ğŸ²ğŸ²ğŸ²ğŸ²ğŸ²ğŸ²</div>
<div id="finalMessage"></div>

<script>
const prompts = [
  "ä»Šæ—¥ã®æœé£Ÿã€æ„Ÿæƒ…ã‚’å…¥ã‚Œã¦æå†™ã—ã‚ˆã†",
  "é€šå‹¤ãƒ»é€šå­¦ä¸­ã«è¦‹ãŸã‚‚ã®ã‚’æ“¬äººåŒ–ã—ã¦æ›¸ã“ã†",
  "æœ€è¿‘ãƒãƒã£ã¦ã‚‹ã“ã¨ã‚’æ¼«ç”»é¢¨ã«è¡¨ç¾",
  "ä»Šæ—¥ã®æ°—åˆ†ã‚’ä¸€è¨€ã§é¢ç™½ãæ›¸ã“ã†",
  "è‡ªåˆ†ã®ãƒšãƒƒãƒˆã®è¡Œå‹•ã‚’ã‚»ãƒªãƒ•ä»˜ãã§æ›¸ã“ã†",
  "å­¦æ ¡ãƒ»ä¼šç¤¾ã§èµ·ããŸé¢ç™½ã„å‡ºæ¥äº‹ã‚’åŠ‡å ´é¢¨ã«",
  "å¥½ããªé£²ã¿ç‰©ã‚„é£Ÿã¹ç‰©ã‚’æ“¬éŸ³ã§è¡¨ç¾ã—ã‚ˆã†"
];
let todayPrompt = prompts[Math.floor(Math.random()*prompts.length)];
document.getElementById("prompt").textContent=`ä»Šæ—¥ã®ãŠé¡Œ: ${todayPrompt}`;

const submit = document.getElementById("submit");
const endBtn = document.getElementById("end");
const input = document.getElementById("input");
const scoreDiv = document.getElementById("score");
const rouletteDiv = document.getElementById("roulette");
const finalMessageDiv = document.getElementById("finalMessage");

let currentScore = 0;
let maxScore = 0;
let rouletteInterval;
let gameEnded = false;

function createParticles(num=20,color="crimson"){
  for(let i=0;i<num;i++){
    const p=document.createElement('div');
    p.className='particle';
    p.style.left=Math.random()*window.innerWidth+'px';
    p.style.top=window.innerHeight+Math.random()*50+'px';
    p.style.background=color;
    p.style.animationDuration=(2+Math.random()*2)+'s';
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),4000);
  }
}

function createConfetti(){
  const confettiCount = 40;
  for(let i=0;i<confettiCount;i++){
    const c=document.createElement('div');
    c.className='confetti';
    c.style.left=Math.random()*window.innerWidth+'px';
    c.style.backgroundColor=`hsl(${Math.random()*360}, 80%, 70%)`;
    c.style.width=(5+Math.random()*5)+'px';
    c.style.height=(10+Math.random()*10)+'px';
    c.style.opacity=0.9;
    c.style.position='absolute';
    c.style.top=-20+'px';
    c.style.pointerEvents='none';
    document.body.appendChild(c);
    const fallDuration = 4+Math.random()*4;
    c.style.transition=`transform ${fallDuration}s linear, top ${fallDuration}s linear`;
    setTimeout(()=>{
      c.style.transform=`rotate(${Math.random()*360}deg)`;
      c.style.top=window.innerHeight+20+'px';
      c.style.left=parseFloat(c.style.left)+Math.random()*100-50+'px';
    },20);
    setTimeout(()=>c.remove(), (fallDuration+0.1)*2000);
  }
}
setInterval(createConfetti, 2000);

submit.addEventListener("click",()=>{
  if(gameEnded) return;
  const text=input.value.trim();
  if(text.length<10){ alert("æ–‡ç« ã¯10æ–‡å­—ä»¥ä¸Šã§æ›¸ã„ã¦ãã ã•ã„ï¼"); return; }
  if(text.length>300){ alert("æ–‡ç« ã¯300æ–‡å­—ä»¥å†…ã«åã‚ã¦ãã ã•ã„ï¼"); return; }
  scoreDiv.textContent="ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã§åˆ¤å®šä¸­â€¦ã‚¯ãƒªãƒƒã‚¯ã§åœæ­¢";
  createParticles(20);
  startRoulette(text);
  input.value="";
});

function startRoulette(userText){
  const symbols=["æˆåŠŸ","å¤±æ•—","æˆåŠŸ","å¤±æ•—","æˆåŠŸ","å¤§æˆåŠŸ"];
  let idx=0;
  rouletteInterval=setInterval(()=>{
    rouletteDiv.textContent=symbols[idx];
    rouletteDiv.style.transform=`rotate(${Math.sin(idx)*10}deg) scale(${1+Math.random()*0.15})`;
    idx=(idx+1)%symbols.length;
  },100);

  rouletteDiv.onclick=()=>{
    clearInterval(rouletteInterval);
    const result=symbols[Math.floor(Math.random()*symbols.length)];
    rouletteDiv.textContent=`çµæœ: ${result}!`;

    rouletteDiv.style.transition="transform 0.5s,color 0.5s";
    rouletteDiv.style.transform="scale(1.5) rotate(0deg)";
    if(result==="å¤§æˆåŠŸ"){ rouletteDiv.style.color="gold"; createParticles(40,"gold"); currentScore+=30; }
    else if(result==="æˆåŠŸ"){ rouletteDiv.style.color="green"; createParticles(30,"green"); currentScore+=10; }
    else{ rouletteDiv.style.color="red"; createParticles(20,"red"); endGame(); }

    if(currentScore > maxScore) maxScore = currentScore;

    scoreDiv.textContent=`åˆè¨ˆã‚¹ã‚³ã‚¢: ${currentScore}`;
    rouletteDiv.onclick=null;
  }
}

endBtn.addEventListener("click",()=>{ endGame(); });

function endGame(){
  if(gameEnded) return;
  gameEnded = true;
  clearInterval(rouletteInterval);
  input.disabled = true;
  submit.disabled = true;
  rouletteDiv.textContent = "";
  finalMessageDiv.innerHTML = `ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼<br>æœ€é«˜ã‚¹ã‚³ã‚¢: ${maxScore}`;
  finalMessageDiv.style.fontSize = "20px";
  finalMessageDiv.style.color = "crimson";
}

    
let promptChangeInterval;

function startPromptChanger(){
  clearInterval(promptChangeInterval); // å¿µã®ãŸã‚å¤ã„ã®ã‚’ã‚¯ãƒªã‚¢
  promptChangeInterval = setInterval(()=>{
    if(gameEnded) return; // çµ‚äº†æ¸ˆã¿ãªã‚‰ä½•ã‚‚ã—ãªã„
    // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆçµæœãŒæˆåŠŸç³»ã‹ç¢ºèª
    const text = rouletteDiv.textContent;
    if(text.includes("çµæœ: æˆåŠŸ") || text.includes("çµæœ: å¤§æˆåŠŸ")){
      // æ–°ã—ã„ãŠé¡Œç”Ÿæˆ
      let newPrompt;
      do {
        newPrompt = prompts[Math.floor(Math.random()*prompts.length)];
      } while(newPrompt === todayPrompt); // åŒã˜ãŠé¡Œã¯é¿ã‘ã‚‹
      todayPrompt = newPrompt;
      document.getElementById("prompt").textContent=`ä»Šæ—¥ã®ãŠé¡Œ: ${todayPrompt}`;
      rouletteDiv.textContent = "ãŠé¡Œã‚’æ›´æ–°ã—ã¾ã—ãŸï¼";
    }
  }, 5000); // 5ç§’ã”ã¨ã«ãƒã‚§ãƒƒã‚¯
}

startPromptChanger(); // ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«å‘¼ã¶

</script>

</body>
</html>
